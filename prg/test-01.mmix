SP	GREG	#4000000000000000
FP	GREG	0

	LOC	Data_Segment
	GREG	@
InputSize	IS	8
InputBuffer	OCTA	0
	LOC	InputBuffer+InputSize
BufferPosition	OCTA	@
InputArgs	OCTA	InputBuffer,InputSize

HP	GREG	@
	LOC	#100

Main	PUSHJ	3,_main
	LDO	$255,$254,0
	TRAP	0,Halt,0

_new	LDO	$0,SP,8
	STO	HP,SP,0
	ADD	HP,HP,$0
	POP	3,0

_del	POP	3,0

_exit	SET	$255,1
	TRAP	0,Halt,0
_putChar	SETL $0,8
	INCML $0,8
	SUB $0,SP,$0
	STO FP,$0,0
	SET FP,SP
	SETL $0,16
	INCML $0,16
	SUB SP,SP,$0
	SETL $0,-8
	STO rJ,FP,0
	JMP L2
L3	STO $255,FP,0
	SETL $0,16
	INCML $0,16
	SUB $0,FP,$0
	LDO 4,$0,0
	SET SP,FP
	SETL $0,8
	INCML $0,8
	SUB $0,SP,$0
	LDO FP,$0,0
	POP 3,0
_getChar	SETL $0,8
	INCML $0,8
	SUB $0,SP,$0
	STO FP,$0,0
	SET FP,SP
	SETL $0,16
	INCML $0,16
	SUB SP,SP,$0
	SETL $0,-8
	STO rJ,FP,0
	JMP L4
L5	STO $255,FP,0
	SETL $0,16
	INCML $0,16
	SUB $0,FP,$0
	LDO 4,$0,0
	SET SP,FP
	SETL $0,8
	INCML $0,8
	SUB $0,SP,$0
	LDO FP,$0,0
	POP 3,0
_f	SETL $0,8
	INCML $0,8
	SUB $0,SP,$0
	STO FP,$0,0
	SET FP,SP
	SETL $0,16
	INCML $0,16
	SUB SP,SP,$0
	SETL $0,-8
	STO rJ,FP,0
	JMP L0
L0	SET $1,$253
	SETL $0,8
	SET $2,$0
	ADD $0,$1,$2
	LDO $2,$0,0
	SET $1,$2
	SETL $0,1
	SET $2,$0
	ADD $0,$1,$2
	SET $1,$0
	SET $0,$1
	JMP L1
L1	STO $0,FP,0
	SETL $0,16
	INCML $0,16
	SUB $0,FP,$0
	LDO 4,$0,0
	SET SP,FP
	SETL $0,8
	INCML $0,8
	SUB $0,SP,$0
	LDO FP,$0,0
	POP 3,0
